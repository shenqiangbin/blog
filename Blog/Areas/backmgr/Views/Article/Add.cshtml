@model Article

@{
    ViewBag.Title = "Add";
}

<style>
    .addtitle{
        width:100%;
        height:30px;
        margin:5px 0px;
        padding:5px;
    }

    textarea{
        width:100%;
    }

    .handlearea{
        margin-top:20px;
    }

    .savebtn{
        margin-right:50px;
    }

    .msg{
        margin-top:10px;
        font-size:small;
        color:red;
    }

</style>

<h4>新增文章</h4>



题目：
<br/>
<input type="text" name="title" value=" " class="addtitle" id="title"/>

内容：
<br />
<script id="caseContent" name="caseContent" type="text/plain" style="width:100%;height:400px;margin-top:5px;"></script>

<div class="handlearea">
    <button type="button" class="savebtn" id="btnSave">保存</button>    
    <button type="button">预览</button>
</div>

<div class="msg" id="msg">
    
</div>

@section footer{

    <script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
    @Scripts.Render("~/Scripts/ueditor/js")
    @Scripts.Render("~/Scripts/ueditor/lang/zh-cn/zh")

    <script>

        var ue = "";
        initUEditor();

        function initUEditor() {
            if (!ue) {
                ue = UE.getEditor('caseContent');
            }
        }

        $("#btnSave").click(function () {
            var data = {};
            data.title = $("#title").val().trim();
            if (ue)
                data.content = ue.getContent();

            if (!validateData(data))
                return;

            $.ajax({
                type: "Post",
                url: "/backmgr/Article/Add",
                data: data,
                success: function (result) {
                    if (result.code == 200) {
                        showMsg('保存成功');
                    } else {
                        showMsg(result.msg);
                    }
                },
                error: function (msg) {
                    alert(msg);
                }

            });

        });

        function validateData(data) {
            //todo:
            return true;
        }

        function showMsg(msg) {
            $('#msg').html(msg);
        }

    </script>
}