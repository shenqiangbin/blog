@model StaticPagedList<Article>

@{
    ViewBag.Title = "Index";
}

@section header{
    @Styles.Render("~/Content/backindex")
}

<div style="padding-top:20px;">
    <a href="@Url.Action("Add","Article")">写博客</a>
</div>

<div class="indexcontainer">
    @if (Model == null || Model.Count == 0)
    {
        <div class="record">
            暂无数据
        </div>
    }
    else
    {
        foreach (var item in Model)
        {

            <div class="record">
                <a href="@Url.Action("Detail","Home", new { area = "", id =item.ArticleId } )" title="@item.Title">
                    <span>@item.Title</span>
                    <span class="date">@item.DisplayCreatedTime.ToString("yyyy-MM-dd")</span>
                </a>
                <span class="operate">
                    <a href="@Url.Action("Add","Article", new { id = item.ArticleId })">编辑</a>
                    <a href="javascript:void(0)" onclick="del(@item.ArticleId)">删除</a>
                </span>
            </div>

        }
    }
    @if (Model.PageCount > 1)
    {
        <div>@Html.PagedListPager((IPagedList)(Model), p => Url.Action("Index", new { page = p }), PagedListRenderOptions.ClassicPlusFirstAndLast)</div>
    }
</div>

@section footer{
    <script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
    <script>
        $(function () {
            
        });

        function del(id){
            var url = '@Url.Action("Del","Article")';
            $.post(url, { id: id }, function (data) {
                if (data.code == 200)
                    window.document.location.reload();
                else
                    alert(data.msg);
            });
        }
    </script>
}
